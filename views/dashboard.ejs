<link href="../public/styles/multi-select.css" rel="stylesheet">

<script type="text/javascript" src="https://static.eversign.com/js/embedded-signing.js"></script>
<script 
    id="dbScript"
    data-email="<%= user.email %>" 
    defer src="../public/scripts/dashboard.js">
</script>
<script defer src="../public/scripts/multi-select.js"></script>

<section id="dashboard">
    <% if (user) { %>
        <h1>TruckerComp Dashboard for <%= user.name %></h1>
    <% } else { %> 
        <h1>TruckerComp Dashboard</h1>
        <h4>Please create your profile</h4>
    <% } %>
    <div id="dashboard-nav">
        <div id="progressButton" class="dashboard-nav-button left" onclick="dashboardToggle(event, 'progress-section')">
            <h3 class="form-button-text">Progess</h3>
        </div>
        <div id="profileButton" class="dashboard-nav-button" onclick="dashboardToggle(event, 'profile-section')">
            <h3 class="form-button-text">Profile</h3>
        </div>
        <div id="policyButton" class="dashboard-nav-button right" onclick="dashboardToggle(event, 'policy-section')">            
            <h3 class="form-button-text">Policy Info</h3>
        </div>
    </div>

    <div id="progress-section" class="dashboard-section hidden">
        <h2>Policy progress (hover for details)</h2>

        <div id="progress-steps">
            <li id="step1" class="step">Step 1</li>
            <li id="step2" class="step">Step 2</li>
            <li id="step3" class="step">Step 3</li>
            <li id="step4" class="step">Step 4</li>
            <li id="step5" class="step">Step 5</li>

        </div>
        <div id="progress-graphic">
            <!-- <hr class="completed"/>
            <hr class="completed"/>
            <hr class="current"/> -->
            <hr />
            <hr />
            <hr />
            <hr />
            <hr />
        </div>
        <div id="messages-area">


        </div>
    </div>

    <div id="profile-section" class="dashboard-section" style="opacity: 1;">
        <div id="userInfoStatic">
            <h2>Here is the information we have on record for you</h2>
            <div id="userInfo">
                <h4>Name: <span class="userProperty" id="userName"></span></h4>
                <h4>Email: <span class="userProperty" id="userEmail"></span></h4>
                <h4>Company Name: <span class="userProperty" id="userCompanyName"></span></h4>
                <h4>Phone Number: <span class="userProperty" id="userPhone"></span></h4>
                <hr class="separator" />
                <h4>DOT Number: <span class="userProperty" id="userDOT"></span></h4>
                <h4>Address: <span class="userProperty" id="userAddress"></span></h4>
                <h4>Mailing Address: <span class="userProperty" id="userMailingAddress"></span></h4>
                <h4>Trucks: <span class="userProperty" id="userPowerUnits"></span></h4>
                <hr class="separator" />
                <h4>Drivers: <span class="userProperty" id="userDrivers"></span></h4>
                <h4>Total Payroll: <span class="userProperty" id="userTotalPayroll"></span></h4>
                <h4>Annual Mileage: <span class="userProperty" id="userMileage"></span></h4>
                <h4>Carrier Operation: <span class="userProperty" id="userCarrierOperation"></span></h4>
                <hr class="separator" />
                <h4>Operation Type: </h4>
                <h4 id="opTypes" class="userProperty"> <%= JSON.stringify(user.operationType) %> </h4>
                <h4>Cargo Carried: </h4>
                <h4 id="cargo" class="userProperty"></h4>
            </div> 
            <button class="form-button" id="toggleForm" onclick="toggleForm()">
                <h3 class="form-button-text">Edit</h3>
            </button>
        </div>
        <form >
            <div id="userInfoUpdate">
                <h2>Update your information</h2>
                <div id="editForm">
                    <fieldset>
                        <label for="name">Name</label>
                        <input id="name" name="name" type="text" value="<%= user.name %>">
                    </fieldset>
                    <fieldset>
                        <label for="email">Email</label>
                        <input id="email" name="email" type="text" value="<%= user.email %>">
                    </fieldset>
                    <fieldset>
                        <label for="companyName">Company Name</label>
                        <input id="companyName" name="companyName" type="text" value="<%= user.companyName %>">
                    </fieldset>
                    <fieldset>
                        <label for="phone">Phone Number</label>
                        <input id="phone" name="phone" type="text" value="<%= user.phone %>">
                    </fieldset>

                    <fieldset>
                        <label for="DOT">DOT Number</label>
                        <input id="DOT" name="DOT" type="number" value="<%= user.DOT %>">
                    </fieldset>
                    <fieldset>
                        <label for="address">Address</label>
                        <input id="address" name="address" type="text" value="<%= user.address %>">
                    </fieldset>
                    <fieldset>
                        <label for="mailingAddress">Mailing Address</label>
                        <input id="mailingAddress" name="mailingAddress" type="text" value="<%= user.mailingAddress %>">
                    </fieldset>
                    <fieldset>
                        <label for="powerUnits">Trucks</label>
                        <input id="powerUnits" name="powerUnits" type="number" value="<%= user.powerUnits %>">
                    </fieldset>
                    <fieldset>
                        <label for="drivers">Drivers</label>
                        <input id="drivers" name="powerUnits" type="number" value="<%= user.drivers %>">
                    </fieldset>
                    <fieldset>
                        <label for="totalPayroll">Total Payroll</label>
                        <input id="totalPayroll" name="totalPayroll" type="number" value="<%= user.totalPayroll %>">
                    </fieldset>
                    <fieldset>
                        <label for="mileage">Annual Mileage</label>
                        <input id="mileage" name="mileage" type="number" value="<%= user.mileage %>">
                    </fieldset>
                    <fieldset>
                        <label for="carrierOperation">Carrier Operation</label>
                        <select id="carrierOperation" name="carrierOperation" value="<%= user.carrierOperation %>">
                            <option value="interstate">Interstate</option>
                            <option value="intrastate-hm">Intrastate (Hazardous)</option>
                            <option value="intrastate-non">Intrastate (Non-Hazardous)</option>
                        </select>
                    </fieldset>
                    <label class="label aside" for="operationType">Operation Type</label>
                    <select name="operationType" class="field aside" id="operationType">
                        <option value="1">Authorized for Hire</option>
                        <option value="2">Private Passenger, Business</option>
                        <option value="3">U.S. Mail</option>
                        <option value="4">Exempt for Hire</option>
                        <option value="5">Local Government</option>
                        <option value="6">Private Passenger, Non-business</option>
                        <option value="7">Federal Government</option>
                        <option value="8">Indian Tribe</option>
                        <option value="9">Private Property</option>
                        <option value="10">Migrant</option>
                        <option value="11">State Government</option>
                        <option value="12">Dump Truck</option>
                        <option value="13">Other</option>
                    </select>
                    <label class="label aside" for="cargoCarried">Cargo Carried</label>
                    <select name="cargoCarried" class="field aside" id="cargoCarried">
                        <option value="1">General Freight</option>
                        <option value="2">Motor Vehicles</option>
                        <option value="3">Building Materials</option>
                        <option value="4">Fresh Produce</option>
                        <option value="5">Passengers</option>
                        <option value="6">Grain, Feed, Hay</option>
                        <option value="7">Garbage, Refuse, Trash</option>
                        <option value="8">Commodities Dry Bulk</option>
                        <option value="9">Paper Products</option>
                        <option value="10">Construction</option>
                        <option value="11">Household Goods</option>
                        <option value="12">Drive away/Towaway</option>
                        <option value="13">Mobile Homes</option>
                        <option value="14">Liquids/Gases</option>
                        <option value="15">Oil Field Equipment</option>
                        <option value="16">Coal, Coke</option>
                        <option value="17">U.S. Mail</option>
                        <option value="18">Refrigerated Food</option>
                        <option value="19">Utility</option>
                        <option value="20">Water Well</option>
                        <option value="21">Metal; Sheets, Coils, Rolls</option>
                        <option value="22">Logs, Poles, Beams, Lumber</option>
                        <option value="23">Machinery, Large Objects</option>
                        <option value="24">Intermodal Containers</option>
                        <option value="25">Livestock</option>
                        <option value="26">Meat</option>
                        <option value="27">Chemicals</option>
                        <option value="28">Beverages</option>
                        <option value="29">Farm Supply</option>
                        <option value="30">Sand and Gravel</option>
                        <option value="31">Office Furniture & Supplies</option>
                        <option value="32">Other</option>
                    </select>
                </div>
                <input id="userID" type="hidden" value="<%= user._id %>">
                <a id="saveForm" class="form-button" onclick="saveForm(event)">
                    <h3 class="form-button-text">Save</h3>
                </a>

            </div>
        </form>
    </div>

    <div id="policy-section" class="dashboard-section hidden">
        <h2>Upload your 2020 1099 (pdf)</h2>
        <input id="file-upload" type="file" >

        <h4>Your uploaded files</h4>
        <div id="file-preview"></div>

        <div id="signature-area">
            <!-- <iframe src="" height="100px" width="400px"></iframe> -->
        </div>
    </div>
</section>